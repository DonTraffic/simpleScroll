const scrollsData={};function changeShadow(e,l,t){l.shadowPrev&&(l.shadowPrev.style.opacity=1,t<=0&&(l.shadowPrev.style.opacity=0)),l.shadowNext&&(l.shadowNext.style.opacity=1,t>=e&&(l.shadowNext.style.opacity=0))}function sliderValidate(e){"horizontal"==e.slider.direction&&e.slider.elem.offsetWidth>e.slider.line.offsetWidth+e.slider.styles.padding&&(e.slider.scrollMax=0),"vertical"==e.slider.direction&&e.slider.elem.offsetHeight>e.slider.line.offsetHeight+e.slider.styles.padding&&(e.slider.scrollMax=0)}function sliderUpdateDeep(e){if(document.querySelectorAll(`.${e.name}-slider`).forEach((l,t)=>{scrollsData[e.name].sliders[t]={};let o=scrollsData[e.name].sliders[t];o.elem=document.querySelector(`.${e.name}-slider--${t}`),o.line=o.elem.querySelector(`.${e.name}-line`),o.line.classList.add("slider-line--transition"),o.items=o.elem.querySelectorAll(`.${e.name}-item`),o.shadowPrev=document.querySelector(`.${e.name}-shadow-prev`)?o.elem.querySelector(`.${e.name}-shadow-prev`):document.querySelector(`.${e.name}-shadow-prev--${t}`),o.shadowNext=document.querySelector(`.${e.name}-shadow-next`)?o.elem.querySelector(`.${e.name}-shadow-next`):document.querySelector(`.${e.name}-shadow-next--${t}`),o.revert=o.elem.getAttribute("revert"),o.revert="true"==o.revert,o.anchor=o.elem.getAttribute("anchor"),o.anchor="true"==o.anchor,o.anchor&&(o.moveOffset=0),o.direction=o.elem.getAttribute("direction"),o.direction="horizontal"==o.direction||"vertical"==o.direction?o.direction:"horizontal",o.styles=window.getComputedStyle(o.elem),o.styles={padding:"horizontal"==o.direction?parseInt(o.styles.paddingLeft,10)+parseInt(o.styles.paddingRight,10):parseInt(o.styles.paddingTop,10)+parseInt(o.styles.paddingBottom,10),gap:"normal"!=window.getComputedStyle(o.line).gap?parseInt(window.getComputedStyle(o.line).gap,10):0},o.points=!!o.elem.getAttribute("points")&&JSON.parse(o.elem.getAttribute("points")),o.points&&(o.itemsCount=getItemCount(o),o.itemSize=(("horizontal"==o.direction?o.elem.offsetWidth:o.elem.offsetHeight)-o.styles.padding-o.styles.gap*(o.itemsCount>0?o.itemsCount-1:o.itemsCount))/o.itemsCount,o.items.forEach(e=>{"horizontal"==o.direction?e.style.width=`${o.itemSize}px`:e.style.height=`${o.itemSize}px`})),o.size={elem:"horizontal"==o.direction?o.elem.offsetWidth:o.elem.offsetHeight,line:("horizontal"==o.direction?o.line.offsetWidth:o.line.offsetHeight)+o.styles.padding},o.scrollMax=o.size.line-o.size.elem,o.step=t?o.scrollMax/scrollsData[e.name].sliders[0].scrollMax:1,o.percent=0,o.skip=!1}),document.querySelector(`.${e.name}-scroll`)){scrollsData[e.name].scroll={};let l=scrollsData[e.name].scroll,t=scrollsData[e.name].sliders[0];l.elem=document.querySelector(`.${e.name}-scroll`),l.thumb=document.querySelector(`.${e.name}-thumb`),l.thumb.classList.add("scroll-thumb--transition"),l.direction=l.elem.getAttribute("direction")?l.elem.getAttribute("direction"):l.elem.offsetWidth>l.elem.offsetHeight?"horizontal":"vertical",l.size={},l.size.elem="horizontal"==l.direction?l.elem.offsetWidth:l.elem.offsetHeight,l.size.thumb=l.size.elem/100*(100*t.size.elem/t.size.line),"horizontal"==l.direction?l.thumb.style.width=`${l.size.thumb}px`:l.thumb.style.height=`${l.size.thumb}px`,l.scrollMax=l.size.elem-l.size.thumb,l.step=l.scrollMax/t.scrollMax}else scrollsData[e.name].scroll=!1;scrollsData[e.name].btns={prev:document.querySelectorAll(`.${e.name}-btn-prev`),next:document.querySelectorAll(`.${e.name}-btn-next`)},setEvents(e),rollScroll(e)}function updateScrollAll(){document.querySelectorAll(".DTScroll").forEach(e=>{sliderUpdateDeep(scrollsData[e.id])})}function scrollWheel(e,l,t){e.preventDefault(),t?l.global.move-=e.deltaY:l.global.move+=e.deltaY;for(const e in l.sliders){let t=l.sliders[e],o=t.itemSize+t.styles.gap;t.percent=l.global.move/o*t.step}rollScroll(l)}function scrollButton(e,l){event.preventDefault();let t=e.sliders[0],o=t.itemSize+t.styles.gap;l?e.global.move+=o:e.global.move-=o;for(const l in e.sliders){let t=e.sliders[l];t.percent=e.global.move/o*t.step}rollScroll(e)}function rollScroll(e){e.global.move<0&&(e.global.move=0),e.global.move>e.sliders[0].scrollMax&&(e.global.move=e.sliders[0].scrollMax);for(const l in e.sliders){let t=e.sliders[l],o=t.revert?t.scrollMax-e.global.move*t.step:e.global.move*t.step;if(t.anchor){let e=(t.itemSize+t.styles.gap)*Math.round(t.percent);t.revert&&(e=t.scrollMax-e),e>t.scrollMax&&(e=t.scrollMax),e<0&&(e=0),t.move=o-e,o=e}t.line.style.transform="horizontal"==t.direction?`translateX(${-o}px)`:`translateY(${-o}px)`,changeShadow(e.sliders[0].scrollMax,t,e.global.move)}e.scroll&&(e.scroll.thumb.style.transform="horizontal"==e.scroll.direction?`translateX(${e.global.move*e.scroll.step}px)`:`translateY(${e.global.move*e.scroll.step}px)`)}function getItemCount(e){let l;for(const t in e.points)!l&&window.innerWidth<=t&&(l=e.points[t]);return l||(l=e.points[0]),l<=e.items.length?l:e.items.length}function sliderTouch(e,l,t,o,s){e.preventDefault();let r="slider"==o?s?t.sliders[s]:t.sliders[0]:t.scroll,i="mouse"==l?"horizontal"==r.direction?e.clientX:e.clientY:"horizontal"==r.direction?e.touches[0].clientX:e.touches[0].clientY,n=t.global.move;for(const e in t.sliders){let l=t.sliders[e];l.skip=l.anchor&&!r.anchor,l.skip||l.line.classList.remove("slider-line--transition"),l.line.style.pointerEvents="none"}function a(e){let l=(i-("horizontal"==r.direction?e.clientX:e.clientY))/r.step;n=t.global.move+(r.revert||"scroll"==o?-l:l);for(const e in t.sliders){let l=t.sliders[e],o=l.itemSize+l.styles.gap,s=n*l.step;s=l.revert?l.scrollMax-s:s,l.percent=n/o*l.step;let i=l.skip?o*Math.round(l.percent):s;r.anchor&&(i-=l.move),!r.anchor&&l.revert&&(i=l.scrollMax-i),l.line.style.transform=`translate${"horizontal"==l.direction?"X":"Y"}(\n                ${l.anchor?-i:-s}px)`,changeShadow(t.sliders[0].scrollMax,l,n)}t.scroll&&(t.scroll.thumb.style.transform="horizontal"==t.scroll.direction?`translateX(${n*t.scroll.step}px)`:`translateY(${n*t.scroll.step}px)`)}function c(e){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",c),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",c);for(const e in t.sliders){let l=t.sliders[e];l.line.classList.add("slider-line--transition"),l.line.style.pointerEvents="all"}t.scroll&&t.scroll.thumb.classList.add("scroll-thumb--transition"),t.global.move=n,rollScroll(t)}t.scroll&&t.scroll.thumb.classList.remove("scroll-thumb--transition"),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a),document.addEventListener("mouseup",c),document.addEventListener("touchend",c)}function setEvents(e){e.scroll&&(e.scroll.thumb.onmousedown=(l=>{sliderTouch(l,"mouse",e,"scroll")}),e.scroll.thumb.ontouchstart=(l=>{sliderTouch(l,"touch",e,"scroll")}),e.scroll.thumb.ondragstart=(()=>!1)),scrollsData[e.name].btns.prev&&scrollsData[e.name].btns.prev.forEach(l=>{l.onclick=(()=>{scrollButton(e,!1)})}),scrollsData[e.name].btns.next&&scrollsData[e.name].btns.next.forEach(l=>{l.onclick=(()=>{scrollButton(e,!0)})});for(const l in e.sliders){let t=e.sliders[l];t.line.onmousedown=(t=>{sliderTouch(t,"mouse",e,"slider",l)}),t.line.ontouchstart=(t=>{sliderTouch(t,"touch",e,"slider",l)}),t.line.ondragstart=(()=>!1),t.line.onwheel=(l=>scrollWheel(l,e,t.revert))}}function initScroll(e){scrollsData[e]={},scrollsData[e].name=e,scrollsData[e].global={move:0},scrollsData[e].sliders={},sliderUpdateDeep(scrollsData[e])}function initScrollAll(){document.querySelectorAll(".DTScroll").forEach(e=>{initScroll(e.id)}),window.onresize=(()=>{updateScrollAll()})}const slider={initScrollAll:initScrollAll,initScroll:initScroll,updateScrollAll:updateScrollAll,sliderUpdateDeep:sliderUpdateDeep,scrollsData:scrollsData};export{slider};