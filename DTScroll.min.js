const scrollsData={};function changeShadow(e,t,l){t.shadowPrev&&(t.shadowPrev.style.opacity=1,l<=0&&(t.shadowPrev.style.opacity=0)),t.shadowNext&&(t.shadowNext.style.opacity=1,l>=e&&(t.shadowNext.style.opacity=0))}function sliderValidate(e){"horizontal"==e.slider.direction&&e.slider.elem.offsetWidth>e.slider.line.offsetWidth+e.slider.styles.padding&&(e.slider.scrollMax=0),"vertical"==e.slider.direction&&e.slider.elem.offsetHeight>e.slider.line.offsetHeight+e.slider.styles.padding&&(e.slider.scrollMax=0)}function sliderUpdateDeep(e){let t=scrollsData[e];if(document.querySelectorAll(`.${t.name}-slider`).forEach((e,l)=>{scrollsData[t.name].sliders[l]={};let o=scrollsData[t.name].sliders[l];o.elem=document.querySelector(`.${t.name}-slider--${l}`),o.line=o.elem.querySelector(`.${t.name}-line`),o.line.classList.remove("slider-line--transition"),o.items=o.elem.querySelectorAll(`.${t.name}-item`),o.shadowPrev=document.querySelector(`.${t.name}-shadow-prev`)?o.elem.querySelector(`.${t.name}-shadow-prev`):document.querySelector(`.${t.name}-shadow-prev--${l}`),o.shadowNext=document.querySelector(`.${t.name}-shadow-next`)?o.elem.querySelector(`.${t.name}-shadow-next`):document.querySelector(`.${t.name}-shadow-next--${l}`),o.revert=o.elem.getAttribute("revert"),o.revert="true"==o.revert,o.anchor=o.elem.getAttribute("anchor"),o.anchor="true"==o.anchor,o.anchor&&(o.moveOffset=0),o.direction=o.elem.getAttribute("direction"),o.direction="horizontal"==o.direction||"vertical"==o.direction?o.direction:"horizontal",o.styles=window.getComputedStyle(o.elem),o.styles={padding:"horizontal"==o.direction?parseInt(o.styles.paddingLeft,10)+parseInt(o.styles.paddingRight,10):parseInt(o.styles.paddingTop,10)+parseInt(o.styles.paddingBottom,10),gap:"normal"!=window.getComputedStyle(o.line).gap?parseInt(window.getComputedStyle(o.line).gap,10):0},o.points=!!o.elem.getAttribute("points")&&JSON.parse(o.elem.getAttribute("points")),o.points&&(o.itemsCount=getItemCount(o),o.itemSize=(("horizontal"==o.direction?o.elem.offsetWidth:o.elem.offsetHeight)-o.styles.padding-o.styles.gap*(o.itemsCount>0?o.itemsCount-1:o.itemsCount))/o.itemsCount,o.items.forEach(e=>{e.style.width="auto",e.style.height="auto","horizontal"==o.direction?e.style.width=`${o.itemSize}px`:e.style.height=`${o.itemSize}px`})),o.size={elem:"horizontal"==o.direction?o.elem.offsetWidth:o.elem.offsetHeight,line:("horizontal"==o.direction?o.line.offsetWidth:o.line.offsetHeight)+o.styles.padding},o.scrollMax=o.size.line-o.size.elem,o.step=l?o.scrollMax/scrollsData[t.name].sliders[0].scrollMax:1,o.percent=0,o.move=0,o.skip=!1,o.line.classList.add("slider-line--transition"),o.line.style.userSelect="none"}),document.querySelector(`.${t.name}-scroll`)){scrollsData[t.name].scroll={};let e=scrollsData[t.name].scroll,l=scrollsData[t.name].sliders[0];e.elem=document.querySelector(`.${t.name}-scroll`),e.thumb=document.querySelector(`.${t.name}-thumb`),e.anchor=e.elem.getAttribute("anchor"),e.anchor&&(e.moveOffset=0,l=scrollsData[t.name].sliders[Number(e.anchor)]),e.direction=e.elem.getAttribute("direction")?e.elem.getAttribute("direction"):e.elem.offsetWidth>e.elem.offsetHeight?"horizontal":"vertical",e.size={},e.size.elem="horizontal"==e.direction?e.elem.offsetWidth:e.elem.offsetHeight,e.size.thumb=e.anchor?e.size.elem/(l.items.length<=2?l.items.length:l.items.length-1):e.size.elem/100*(100*l.size.elem/l.size.line),"horizontal"==e.direction?e.thumb.style.width=`${e.size.thumb}px`:e.thumb.style.height=`${e.size.thumb}px`,e.scrollMax=e.size.elem-e.size.thumb,e.step=e.scrollMax/l.scrollMax,e.percent=0,e.skip=!1,e.thumb.classList.add("scroll-thumb--transition")}else scrollsData[t.name].scroll=!1;scrollsData[t.name].btns={prev:document.querySelectorAll(`.${t.name}-btn-prev`),next:document.querySelectorAll(`.${t.name}-btn-next`)},setEvents(t),rollScroll(t)}function updateScrollAll(){document.querySelectorAll(".DTScroll").forEach(e=>{sliderUpdateDeep(e.id)})}function scrollWheel(e,t,l){e.preventDefault(),l?t.global.move-=e.deltaY:t.global.move+=e.deltaY;for(const e in t.sliders){let l=t.sliders[e],o=l.itemSize+l.styles.gap;l.percent=t.global.move/o*l.step}rollScroll(t)}function scrollButton(e,t){event.preventDefault();let l=e.sliders[0],o=l.itemSize+l.styles.gap;t?e.global.move+=o:e.global.move-=o;for(const t in e.sliders){let l=e.sliders[t];l.percent=e.global.move/o*l.step}rollScroll(e)}function changeButton(e,t){let l=t<0+e.sliders[0].itemSize,o=t>e.sliders[0].scrollMax-e.sliders[0].itemSize;e.btns.prev.forEach(e=>{l?e.classList.add("slider-btn--disable"):e.classList.remove("slider-btn--disable")}),e.btns.next.forEach(e=>{o?e.classList.add("slider-btn--disable"):e.classList.remove("slider-btn--disable")})}function rollScroll(e){e.global.move<0&&(e.global.move=0),e.global.move>e.sliders[0].scrollMax&&(e.global.move=e.sliders[0].scrollMax);for(const t in e.sliders){let l=e.sliders[t],o=l.revert?l.scrollMax-e.global.move*l.step:e.global.move*l.step;if(l.anchor){let e=(l.itemSize+l.styles.gap)*Math.round(l.percent);l.revert&&(e=l.scrollMax-e),e>l.scrollMax&&(e=l.scrollMax),e<0&&(e=0),l.move=o-e,o=e}l.line.style.transform=`translate${"horizontal"==l.direction?"X":"Y"}(${-o}px)`,changeShadow(e.sliders[0].scrollMax,l,e.global.move),changeButton(e,e.global.move)}if(e.scroll){let t=e.scroll;t.percent=e.global.move*t.step/t.size.thumb;let l=t.anchor?t.size.thumb*Math.round(t.percent):e.global.move*t.step;t.anchor?t.move=e.global.move*t.step-t.size.thumb*Math.round(t.percent):t.move=0,t.thumb.style.transform=`translate${"horizontal"==t.direction?"X":"Y"}(${l}px)`}}function getItemCount(e){let t;for(const l in e.points)!t&&window.innerWidth<=l&&(t=e.points[l]);return t||(t=e.points[0]),t<=e.items.length?t:e.items.length}function sliderTouch(e,t,l,o,s){let r="slider"==o?s?l.sliders[s]:l.sliders[0]:l.scroll,i="mouse"==t?e.clientY:e.touches[0].clientY,n="mouse"==t?e.clientX:e.touches[0].clientX,a="horizontal"==r.direction?n:i,c=l.global.move;for(const e in l.sliders){let t=l.sliders[e];t.skip=t.anchor&&!r.anchor,t.skip||t.line.classList.remove("slider-line--transition")}if(l.scroll){let e=l.scroll;e.skip=e.anchor&&"scroll"==o,(e.skip||"scroll"==o)&&e.thumb.classList.remove("scroll-thumb--transition"),e.anchor||e.thumb.classList.remove("scroll-thumb--transition")}function d(e){let s="mouse"==t?e.clientY:e.touches[0].clientY,i="mouse"==t?e.clientX:e.touches[0].clientX,n=(a-("horizontal"==r.direction?i:s))/r.step;c=l.global.move+(r.revert||"scroll"==o?-n:n);for(const e in l.sliders){let t=l.sliders[e],o=t.itemSize+t.styles.gap,s=c*t.step;s=t.revert?t.scrollMax-s:s,t.percent=c/o*t.step;let i=t.skip?o*Math.round(t.percent):s;r.anchor&&(i-=t.move),!r.anchor&&t.revert&&(i=t.scrollMax-i),t.line.style.pointerEvents="none",t.line.style.transform=`translate${"horizontal"==t.direction?"X":"Y"}(\n                ${t.anchor?-i:-s}px)`,changeShadow(l.sliders[0].scrollMax,t,c),changeButton(l,c)}if(l.scroll){let e=l.scroll;if(e.anchor){let t=e.size.thumb;e.percent=c/t*e.step;let l=e.skip?c:t*Math.round(e.percent);e.thumb.style.transform=`translate${"horizontal"==e.direction?"X":"Y"}(\n                    ${"scroll"==o?c*e.step-e.move:l}px)`}else e.thumb.style.transform=`translate${"horizontal"==e.direction?"X":"Y"}(\n                    ${c*e.step}px)`}}function m(e){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",m);for(const e in l.sliders){let t=l.sliders[e];t.line.classList.add("slider-line--transition"),t.line.style.pointerEvents="all"}l.scroll&&l.scroll.thumb.classList.add("scroll-thumb--transition"),l.global.move=c,rollScroll(l)}document.addEventListener("mousemove",d),document.addEventListener("touchmove",d),document.addEventListener("mouseup",m),document.addEventListener("touchend",m)}function setEvents(e){e.scroll&&(e.scroll.thumb.onmousedown=(t=>{sliderTouch(t,"mouse",e,"scroll")}),e.scroll.thumb.ontouchstart=(t=>{sliderTouch(t,"touch",e,"scroll")}),e.scroll.thumb.ondragstart=(()=>!1)),scrollsData[e.name].btns.prev&&scrollsData[e.name].btns.prev.forEach(t=>{t.onclick=(()=>{scrollButton(e,!1)})}),scrollsData[e.name].btns.next&&scrollsData[e.name].btns.next.forEach(t=>{t.onclick=(()=>{scrollButton(e,!0)})});for(const t in e.sliders){let l=e.sliders[t];l.line.onmousedown=(l=>{sliderTouch(l,"mouse",e,"slider",t)}),l.line.ontouchstart=(l=>{sliderTouch(l,"touch",e,"slider",t)}),l.line.ondragstart=(()=>!1),l.line.onwheel=(t=>scrollWheel(t,e,l.revert))}}function initScroll(e){scrollsData[e]={},scrollsData[e].name=e,scrollsData[e].global={move:0},scrollsData[e].sliders={},sliderUpdateDeep(e)}function initScrollAll(){document.querySelectorAll(".DTScroll").forEach(e=>{initScroll(e.id)}),window.onresize=(()=>{updateScrollAll()})}const DTScroll={initScrollAll:initScrollAll,initScroll:initScroll,updateScrollAll:updateScrollAll,sliderUpdateDeep:sliderUpdateDeep,scrollsData:scrollsData};export{DTScroll};